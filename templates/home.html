{% extends 'layout.html' %}

{% block body %}
	<!-- bootstrap component to display a heading -->
	<div class="jumbotron text-center">
		<h1>Dreamteam Dashboard</h1>
		<br>
		<br>
		<br>
		
		<div class="card">
			<h2>Average Won Value Last Year:</h2>
			<div class="value-box">
				<h2> {{ average_won_value }}</h2>
			</div>
		</div>
		<br>
		<br>
		<br>

			<!-- added a class card for a white background of the div -->
			<div class="card">
				<div class="card-body">
					<h5 class="card-title">Deals Won Per Month Last Year</h2>
					<canvas id="deals_per_month" style="width:100%;"></canvas>
				</div>
			</div>

			<br>
			<br>

			<div class="card">
				<div class="card-body">
					<h5 class="card-title">Total Value of Deals Won Deals Per Company</h2>
					<canvas id="deals_per_company" style="width:100%;"></canvas>
				</div>
			</div>
		<br>
		<br>
		
		<div class="card">
			<!-- bootstrap: table class -->
			<table class="table">
				<thead>
					<!-- table row -->
				<tr>
					<th scope="col">Company Name</th>
					<th scope="col">Status</th>
				</tr>
				</thead>

				<tbody>
					{% for company in companies %}
					<tr>
						<!-- table data -->
						<td>
							<p class="text-start">{{ company.name }}</p>
						</td>
						<td>
							{{ company.buyingstatus.text }} 
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

<!-- parse the variables to json files in order to use them from the .js file -->
<script>
	const deals_obj = JSON.parse('{{ deals_per_month | tojson }}');
	const won_deals_obj = JSON.parse('{{ deals_per_company | tojson }}');
</script>

{% endblock %}<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"><head>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor msdt:dt="string">Amanda Olsson</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor>
<mso:Order msdt:dt="string">13800700.0000000</mso:Order>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author msdt:dt="string">Amanda Olsson</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author>
<mso:ContentTypeId msdt:dt="string">0x010100FFDD3F7AF6F7C544B9C6184CE7AC8FC4</mso:ContentTypeId>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
